<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/bootstrop.css">
  <script src="angular.js"></script>
</head>
<body ng-controller="myCon">
 <div style="width:500px; margin:50px auto;">
    <form class="form-horizontal showcase-form" name="basic" id="basic"  novalidate="">
    <div class="form-group">
      <label class="col-sm-2">邮箱</label>
      <div class="col-sm-10">
        <input type="email" name="user_email" ng-model="vm.user.email" required="" class="form-control" placeholder="邮箱">
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2">用户名</label>
      <div class="col-sm-10">
        <input type="text" name="user_name" ng-model="vm.user.name" ng-pattern="/^[A-Za-z]{1}[0-9A-Za-z_]{2,29}$/" required="" class="form-control" placeholder="用户名">
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2">密码</label>
      <div class="col-sm-10">
        <input type="password" name="user_password" ng-model="vm.user.password" required="" ng-maxlength="20" ng-minlength="6" class="form-control" placeholder="密码">
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2"></label>
      <div class="alert alert-danger" ng-show="basic.$invalid && (vm.type_show==3 || basic.$dirty ) && vm.type_error">
      <ul>
          <li ng-show="basic.user_email.$invalid && (vm.type_show==3 || basic.user_email.$dirty ) && basic.user_email.$error.required">邮箱不能为空</li>
          <li ng-show="basic.user_email.$invalid && (vm.type_show==3 || basic.user_email.$dirty ) && basic.user_email.$error.email">邮箱格式不正确</li>
          <li ng-show="basic.user_name.$invalid && (vm.type_show==3 || basic.user_name.$dirty ) && basic.user_name.$error.required">用户名不能为空</li>
          <li ng-show="basic.user_name.$invalid && (vm.type_show==3 || basic.user_name.$dirty ) && basic.user_name.$error.pattern">用户名格式不正确</li>
          <li ng-show="basic.user_password.$invalid && (vm.type_show==3 || basic.user_password.$dirty ) && basic.user_password.$error.required">密码不能为空</li>
          <li ng-show="basic.user_password.$invalid && (vm.type_show==3 || basic.user_password.$dirty ) && basic.user_password.$error.maxlength">密码不能大于20</li>
          <li ng-show="basic.user_password.$invalid && (vm.type_show==3 || basic.user_password.$dirty ) && basic.user_password.$error.minlength">密码不能小于6</li>
        </ul>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2"></label>
      <div class="col-sm-10">
        <input type="submit" ng-click="vm.submit(basic)" ng-disabled="vm.type_show!=3 && basic.$invalid " class="btn btn-success" value="提交">
      </div>
    </div>
    <hr>
    <label for="">
      <select class="form-control" ng-model="vm.type_show" ng-change="vm.change_type(basic)">
        <option value="1">只有输入框样式变化</option>
        <option value="2">显示错误提示</option>
        <option value="3">点击提交才显示错误提示</option>
      </select>
    </label>
  </form>
 </div>
</body>
</html>
<script type="text/javascript">
  angular.module("myApp",[]).controller("myCon",function($scope){
    var vm= $scope.vm={
      type_error:false,
      type_show:1,
      user:{}
    };
    vm.submit=function(basic){
      vm.type_error=true;
      basic.$setDirty();
      if(basic.$valid) {
        alert("ok")
      }
    };
    vm.change_type=function(basic){
      if(vm.type_show==2){
        vm.type_error=true;
      }else{
        vm.type_error=false;
      }
      vm.user={};
      basic.$setPristine();
    }
  })
</script>

















 